class MemoryStore { constructor() { this.store = {}; } sanitizeKey(key) { if (typeof key !== 'string') { throw new Error('Key must be a string'); } return key.trim(); } storeData(key, value) { const sanitizedKey = this.sanitizeKey(key); this.store[sanitizedKey] = value; this.emitTelemetry('store', { key: sanitizedKey, value }); return value; } retrieveData(key) { const sanitizedKey = this.sanitizeKey(key); if (!this.store[sanitizedKey]) { throw new Error('Missing state'); } this.emitTelemetry('retrieve', { key: sanitizedKey }); return this.store[sanitizedKey]; } emitTelemetry(action, payload) { console.log(`[TELEMETRY] ${action}`, payload); } } module.exports = MemoryStore;
