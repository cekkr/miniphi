{
  "name": "C++ Project Structure Improvement Analysis",
  "pinned": false,
  "createdAt": 1766040417790,
  "preset": "",
  "tokenCount": 2747,
  "userLastMessagedAt": 1766040653399,
  "assistantLastMessagedAt": 1766040828263,
  "systemPrompt": "",
  "messages": [
    {
      "versions": [
        {
          "type": "singleStep",
          "role": "user",
          "content": [
            {
              "type": "text",
              "text": "I have to improve my C++ project source code file and class structure. Using JSON, describe step by step what directories tree to list you and what files contents to show you to allow you create a general view of the project and listing possible editing approaches"
            }
          ]
        }
      ],
      "currentlySelected": 0
    },
    {
      "versions": [
        {
          "type": "multiStep",
          "role": "assistant",
          "senderInfo": {
            "senderName": "mistralai/devstral-small-2-2512"
          },
          "steps": [
            {
              "type": "contentBlock",
              "stepIdentifier": "1766040502056-0.45876462721081723",
              "content": [
                {
                  "type": "text",
                  "text": "To help you improve your C++ project's source code file and class structure, I'll need a detailed understanding of your current project layout. Below is a JSON template that outlines the information I require:\n\n```json\n{\n  \"project_name\": \"Your Project Name\",\n  \"directories_tree\": {\n    \"root_dir\": {\n      \"description\": \"Brief description of the root directory\",\n      \"subdirectories\": [\n        {\n          \"name\": \"directory_name\",\n          \"description\": \"Description of this directory's purpose\",\n          \"files\": [\n            {\n              \"name\": \"file_name.cpp\",\n              \"description\": \"Purpose of this file\",\n              \"contents_preview\": \"First 20 lines or key sections\"\n            },\n            {\n              \"name\": \"file_name.h\",\n              \"description\": \"Header file contents\",\n              \"contents_preview\": \"Class declarations, includes, etc.\"\n            }\n          ],\n          \"subdirectories\": [...]\n        }\n      ]\n    }\n  },\n  \"build_system\": {\n    \"type\": \"CMake/Makefile/Other\",\n    \"description\": \"Brief explanation of build process\"\n  },\n  \"key_classes\": [\n    {\n      \"name\": \"ClassName\",\n      \"responsibilities\": [\"Primary responsibilities\"],\n      \"current_issues\": [\"Identified problems\"]\n    }\n  ],\n  \"desired_improvements\": [\n    \"List your specific goals for improvement\"\n  ]\n}\n```\n\n### What I need from you:\n\n1. **Directory Structure**:\n   - List all directories and their purposes\n   - Show file organization (headers, sources, etc.)\n\n2. **File Contents**:\n   - For key files, show:\n     - Class declarations (in headers)\n     - Method implementations (in source files)\n     - Important data structures\n\n3. **Current Issues**:\n   - What problems are you encountering?\n   - Which parts feel disorganized?\n\n4. **Your Goals**:\n   - Better separation of concerns?\n   - Improved naming conventions?\n   - More modular design?\n   - Better documentation?\n\n### Example Format:\n\n```json\n{\n  \"project_name\": \"GameEngine\",\n  \"directories_tree\": {\n    \"root_dir\": {\n      \"description\": \"Main project directory\",\n      \"subdirectories\": [\n        {\n          \"name\": \"src\",\n          \"description\": \"Source code\",\n          \"files\": [\n            {\n              \"name\": \"Entity.cpp\",\n              \"contents_preview\": \"// Entity class implementation\\nclass Entity {\\npublic:\\n    void update() { /* current logic */ }\\n};\"\n            }\n          ]\n        },\n        {\n          \"name\": \"include\",\n          \"description\": \"Header files\",\n          \"files\": [\n            {\n              \"name\": \"Entity.h\",\n              \"contents_preview\": \"#pragma once\\nclass Entity {\\n    int id;\\npublic:\\n    void update();\\n};\"\n            }\n          ]\n        }\n      ]\n    }\n  },\n  \"desired_improvements\": [\"Better class separation\", \"More modular design\"]\n}\n```\n\nPlease provide this information in JSON format, and I'll analyze your project structure to suggest improvements for:\n- Class organization\n- Directory hierarchy\n- Naming conventions\n- Potential refactoring opportunities\n- Documentation strategies",
                  "fromDraftModel": false,
                  "tokensCount": 680,
                  "isStructural": false
                }
              ],
              "genInfo": {
                "indexedModelIdentifier": "mistralai/devstral-small-2-2512",
                "identifier": "mistralai/devstral-small-2-2512",
                "loadModelConfig": {
                  "fields": [
                    {
                      "key": "llm.load.llama.cpuThreadPoolSize",
                      "value": 9
                    },
                    {
                      "key": "llm.load.contextLength",
                      "value": 4096
                    },
                    {
                      "key": "llm.load.llama.acceleration.offloadRatio",
                      "value": 0.9
                    }
                  ]
                },
                "predictionConfig": {
                  "fields": [
                    {
                      "key": "llm.prediction.temperature",
                      "value": 0.15
                    },
                    {
                      "key": "llm.prediction.promptTemplate",
                      "value": {
                        "type": "jinja",
                        "jinjaPromptTemplate": {
                          "template": "{#- Default system message if no system prompt is passed. #}\n{%- set default_system_message = '' %}\n\n{#- Begin of sequence token. #}\n{{- bos_token }}\n\n{#- Handle system prompt if it exists. #}\n{#- System prompt supports text content or text chunks. #}\n{%- if messages[0]['role'] == 'system' %}\n    {{- '[SYSTEM_PROMPT]' -}}\n    {%- if messages[0]['content'] is string %}\n        {{- messages[0]['content'] -}}\n    {%- else %}        \n        {%- for block in messages[0]['content'] %}\n            {%- if block['type'] == 'text' %}\n                {{- block['text'] }}\n            {%- else %}\n                {{- raise_exception('Only text chunks are supported in system message contents.') }}\n            {%- endif %}\n        {%- endfor %}\n    {%- endif %}\n    {{- '[/SYSTEM_PROMPT]' -}}\n    {%- set loop_messages = messages[1:] %}\n{%- else %}\n    {%- set loop_messages = messages %}\n    {%- if default_system_message != '' %}\n        {{- '[SYSTEM_PROMPT]' + default_system_message + '[/SYSTEM_PROMPT]' }}\n    {%- endif %}\n{%- endif %}\n\n\n{#- Tools definition #}\n{%- set tools_definition = '' %}\n{%- set has_tools = false %}\n{%- if tools is defined and tools is not none and tools|length > 0 %}\n    {%- set has_tools = true %}\n    {%- set tools_definition = '[AVAILABLE_TOOLS]' + (tools| tojson) + '[/AVAILABLE_TOOLS]' %}\n    {{- tools_definition }}\n{%- endif %}\n\n{#- Checks for alternating user/assistant messages. #}\n{%- set ns = namespace(index=0) %}\n{%- for message in loop_messages %}\n    {%- if message.role == 'user' or (message.role == 'assistant' and (message.tool_calls is not defined or message.tool_calls is none or message.tool_calls | length == 0)) %}\n        {%- if (message['role'] == 'user') != (ns.index % 2 == 0) %}\n            {{- raise_exception('After the optional system message, conversation roles must alternate user and assistant roles except for tool calls and results.') }}\n        {%- endif %}\n        {%- set ns.index = ns.index + 1 %}\n    {%- endif %}\n{%- endfor %}\n\n{#- Handle conversation messages. #}\n{%- for message in loop_messages %}\n\n    {#- User messages supports text content or text and image chunks. #}\n    {%- if message['role'] == 'user' %}\n        {%- if message['content'] is string %}\n            {{- '[INST]' + message['content'] + '[/INST]' }}\n        {%- elif message['content'] | length > 0 %}\n            {{- '[INST]' }}\n            {%- if message['content'] | length == 2 %}\n                {%- if message['content'][0]['type'] == 'text' and message['content'][1]['type'] in ['image', 'image_url'] %}\n                    {%- set blocks = [message['content'][1], message['content'][0]] %}\n                {%- else %}\n                    {%- set blocks = message['content'] %}\n                {%- endif %}\n            {%- else %}\n                {%- set blocks = message['content'] %}\n            {%- endif %}\n            {%- for block in blocks %}\n                {%- if block['type'] == 'text' %}\n                    {{- block['text'] }}\n                {%- elif block['type'] in ['image', 'image_url'] %}\n                    {{- '[IMG]' }}\n                {%- else %}\n                    {{- raise_exception('Only text, image and image_url chunks are supported in user message content.') }}\n                {%- endif %}\n            {%- endfor %}\n            {{- '[/INST]' }}\n        {%- else %}\n            {{- raise_exception('User message must have a string or a list of chunks in content') }}\n        {%- endif %}\n\n    {#- Assistant messages supports text content or text and image chunks. #}\n    {%- elif message['role'] == 'assistant' %}\n        {%- if (message['content'] is none or message['content'] == '' or message['content']|length == 0) and (message['tool_calls'] is not defined or message['tool_calls'] is none or message['tool_calls']|length == 0) %}\n            {{- raise_exception('Assistant message must have a string or a list of chunks in content or a list of tool calls.') }}\n        {%- endif %}\n\n        {%- if message['content'] is string %}\n            {{- message['content'] }}\n        {%- elif message['content'] | length > 0 %}\n            {%- for block in message['content'] %}\n                {%- if block['type'] == 'text' %}\n                    {{- block['text'] }}\n                {%- else %}\n                    {{- raise_exception('Only text chunks are supported in assistant message contents.') }}\n                {%- endif %}\n            {%- endfor %}\n        {%- endif %}\n        \n        {%- if message['tool_calls'] is defined and message['tool_calls'] is not none and message['tool_calls']|length > 0 %}\n            {%- for tool in message['tool_calls'] %}\n                {%- set arguments = tool['function']['arguments'] %}\n                {%- if arguments is not string %}\n                    {%- set arguments = arguments|tojson %}\n                {%- elif arguments == '' %}\n                    {%- set arguments = '{}' %}\n                {%- endif %}\n                {{- '[TOOL_CALLS]' + tool['function']['name'] + '[ARGS]' + arguments }}\n            {%- endfor %}\n        {%- endif %}\n\n        {#- End of sequence token for each assistant messages. #}\n        {{- eos_token }}\n\n    {#- Tool messages only supports text content. #}\n    {%- elif message['role'] == 'tool' %}\n        {{- '[TOOL_RESULTS]' + message['content']|string + '[/TOOL_RESULTS]' }}\n\n    {#- Raise exception for unsupported roles. #}\n    {%- else %}\n        {{- raise_exception('Only user, assistant and tool roles are supported, got ' + message['role'] + '.') }}\n    {%- endif %}\n{%- endfor %}"
                        },
                        "stopStrings": []
                      }
                    },
                    {
                      "key": "llm.prediction.llama.cpuThreads",
                      "value": 9
                    },
                    {
                      "key": "llm.prediction.vision.userMaxImageDimensionPixels",
                      "value": {
                        "checked": true,
                        "value": 2048
                      }
                    },
                    {
                      "key": "llm.prediction.vision.ignoreModelPreferredMaxImageDimension",
                      "value": false
                    },
                    {
                      "key": "llm.prediction.contextPrefill",
                      "value": []
                    },
                    {
                      "key": "llm.prediction.systemPrompt",
                      "value": "You are Devstral-Small-2-24B-Instruct-2512, a Large Language Model (LLM) created by Mistral AI, a French startup headquartered in Paris.\nYour knowledge base was last updated on 2023-10-01.\n\nWhen you're not sure about some information or when the user's request requires up-to-date or specific data, you must use the available tools to fetch the information. Do not hesitate to use tools whenever they can provide a more accurate or complete response. If no relevant tools are available, then clearly state that you don't have the information and avoid making up anything.\nIf the user's question is not clear, ambiguous, or does not provide enough context for you to accurately answer the question, you do not try to answer it right away and you rather ask the user to clarify their request (e.g. \"What are some good restaurants around me?\" => \"Where are you?\" or \"When is the next flight to Tokyo\" => \"Where do you travel from?\").\nYou are always very attentive to dates, in particular you try to resolve dates and when asked about information at specific dates, you discard information that is at another date.\nYou follow these instructions in all languages, and always respond to the user in the language they use or request.\nNext sections describe the capabilities that you have.\n\n# WEB BROWSING INSTRUCTIONS\n\nYou cannot perform any web search or access internet to open URLs, links etc. If it seems like the user is expecting you to do so, you clarify the situation and ask the user to copy paste the text directly in the chat.\n\n# MULTI-MODAL INSTRUCTIONS\n\nYou have the ability to read images, but you cannot generate images. You also cannot transcribe audio files or videos.\nYou cannot read nor transcribe audio files or videos.\n\n# TOOL CALLING INSTRUCTIONS\n\nYou may have access to tools that you can use to fetch information or perform actions. You must use these tools in the following situations:\n\n1. When the request requires up-to-date information.\n2. When the request requires specific data that you do not have in your knowledge base.\n3. When the request involves actions that you cannot perform without tools.\n\nAlways prioritize using tools to provide the most accurate and helpful response. If tools are not available, inform the user that you cannot perform the requested action at the moment."
                    },
                    {
                      "key": "llm.prediction.tools",
                      "value": {
                        "type": "none"
                      }
                    }
                  ]
                },
                "stats": {
                  "stopReason": "eosFound",
                  "tokensPerSecond": 8.84137885891474,
                  "numGpuLayers": -1,
                  "timeToFirstTokenSec": 2.08,
                  "totalTimeSec": 77.025,
                  "promptTokensCount": 559,
                  "predictedTokensCount": 681,
                  "totalTokensCount": 1240
                }
              },
              "defaultShouldIncludeInContext": true,
              "shouldIncludeInContext": true
            },
            {
              "type": "debugInfoBlock",
              "stepIdentifier": "1766040578752-0.5651495964643185",
              "debugInfo": "Conversation naming technique: 'prompt'"
            }
          ]
        }
      ],
      "currentlySelected": 0
    },
    {
      "versions": [
        {
          "type": "singleStep",
          "role": "user",
          "content": [
            {
              "type": "text",
              "text": "You have to describe and discover by your self step by step the project content and meaning. Seen that I want to automize the process, provide a list of all json commands and structures needed to obtain a complete examination, summarization and precise editing of a complex project structure"
            }
          ]
        }
      ],
      "currentlySelected": 0
    },
    {
      "versions": [
        {
          "type": "multiStep",
          "role": "assistant",
          "steps": [
            {
              "type": "contentBlock",
              "stepIdentifier": "1766040654143-0.2801453917407676",
              "content": [
                {
                  "type": "text",
                  "text": "To automate the examination, summarization, and precise editing of a complex C++ project structure, we'll need a structured approach with well-defined JSON commands and data structures. Below is a comprehensive framework for this process:\n\n### 1. **Project Discovery Commands**\n\n```json\n{\n  \"command\": \"discover_project\",\n  \"parameters\": {\n    \"root_path\": \"/path/to/project\",\n    \"depth\": 3, // How deep to scan directories\n    \"file_types\": [\"*.cpp\", \"*.h\", \"*.hpp\", \"*.cc\", \"*.cxx\"],\n    \"exclude_patterns\": [\".git/\", \"build/\", \"bin/\"]\n  }\n}\n```\n\n### 2. **Directory Structure Analysis**\n\n```json\n{\n  \"command\": \"analyze_directory_structure\",\n  \"parameters\": {\n    \"path\": \"/path/to/project\",\n    \"output_format\": \"tree\" // or \"flat\"\n  },\n  \"expected_response\": {\n    \"structure\": {\n      \"src/\": {\n        \"type\": \"directory\",\n        \"purpose\": \"Source code implementation\",\n        \"contains\": [\"*.cpp\", \"*.cc\"]\n      },\n      \"include/\": {\n        \"type\": \"directory\",\n        \"purpose\": \"Header files\",\n        \"contains\": [\"*.h\", \"*.hpp\"]\n      }\n    }\n  }\n}\n```\n\n### 3. **File Content Examination**\n\n```json\n{\n  \"command\": \"examine_file\",\n  \"parameters\": {\n    \"file_path\": \"/path/to/file.cpp\",\n    \"focus_areas\": [\"class_declarations\", \"includes\", \"functions\"],\n    \"line_limit\": 50 // Max lines to show per section\n  },\n  \"expected_response\": {\n    \"metadata\": {\n      \"size\": 1245,\n      \"last_modified\": \"2023-10-15\"\n    },\n    \"content_sections\": [\n      {\n        \"type\": \"includes\",\n        \"lines\": [\"#include <vector>\", \"#include \\\"Entity.h\\\"\"]\n      },\n      {\n        \"type\": \"class_declaration\",\n        \"name\": \"GameEngine\",\n        \"methods\": [\"init()\", \"update(float)\", \"render()\"]\n      }\n    ]\n  }\n}\n```\n\n### 4. **Class Relationship Mapping**\n\n```json\n{\n  \"command\": \"map_class_relationships\",\n  \"parameters\": {\n    \"scope\": \"project\" // or specific directory\n  },\n  \"expected_response\": {\n    \"classes\": [\n      {\n        \"name\": \"Entity\",\n        \"inherits_from\": [\"BaseObject\"],\n        \"depends_on\": [\"Transform\", \"Renderer\"]\n      }\n    ],\n    \"relationship_types\": [\"inheritance\", \"composition\", \"association\"]\n  }\n}\n```\n\n### 5. **Code Quality Assessment**\n\n```json\n{\n  \"command\": \"assess_code_quality\",\n  \"parameters\": {\n    \"metrics\": [\n      \"cyclomatic_complexity\",\n      \"function_length\",\n      \"include_depth\",\n      \"naming_conventions\"\n    ],\n    \"thresholds\": {\n      \"max_function_lines\": 50,\n      \"max_includes_per_file\": 15\n    }\n  },\n  \"expected_response\": {\n    \"violations\": [\n      {\n        \"file\": \"src/Physics.cpp\",\n        \"issue\": \"function_too_long\",\n        \"details\": {\n          \"function\": \"calculateForces()\",\n          \"lines\": 87,\n          \"suggestion\": \"Split into smaller functions\"\n        }\n      }\n    ]\n  }\n}\n```\n\n### 6. **Refactoring Recommendations**\n\n```json\n{\n  \"command\": \"generate_refactoring_plan\",\n  \"parameters\": {\n    \"current_structure\": { /* JSON from analyze_directory_structure */ },\n    \"goals\": [\n      \"improve_separation_of_concerns\",\n      \"reduce_coupling\",\n      \"standardize_naming\"\n    ]\n  },\n  \"expected_response\": {\n    \"phases\": [\n      {\n        \"name\": \"Phase 1: Directory Restructuring\",\n        \"actions\": [\n          \"Move rendering code to /src/render/\",\n          \"Create /src/core/ for fundamental classes\"\n        ],\n        \"files_to_modify\": [\"CMakeLists.txt\", \"include/Renderer.h\"]\n      }\n    ]\n  }\n}\n```\n\n### 7. **Implementation Tracking**\n\n```json\n{\n  \"command\": \"track_implementation\",\n  \"parameters\": {\n    \"changes\": [\n      {\n        \"type\": \"move_file\",\n        \"from\": \"src/old_name.cpp\",\n        \"to\": \"src/new_location/new_name.cpp\"\n      },\n      {\n        \"type\": \"update_includes\",\n        \"file\": \"src/main.cpp\",\n        \"new_includes\": [\"<new_header>\"]\n      }\n    ]\n  },\n  \"expected_response\": {\n    \"status\": \"success\",\n    \"modified_files\": [\"CMakeLists.txt\", \"include/Config.h\"],\n    \"warnings\": [\"Some includes may need updating in dependent files\"]\n  }\n}\n```\n\n### 8. **Documentation Generation**\n\n```json\n{\n  \"command\": \"generate_documentation\",\n  \"parameters\": {\n    \"format\": \"markdown\" // or \"doxygen\", \"plantuml\"\n  },\n  \"expected_response\": {\n    \"class_diagram\": \"```mermaid\\nclassDiagram\\ntitle Project Class Structure\\nclass Entity {\\n+update() void\\n}\\nclass Renderer {\\n+render() void\\n}\\nEntity --> Renderer : uses\\n```\",\n    \"architecture_overview\": \"The project follows a layered architecture with core components in /src/core/...\"\n  }\n}\n```\n\n### Complete Workflow Example:\n\n```json\n{\n  \"workflow\": [\n    {\n      \"step\": 1,\n      \"command\": \"discover_project\",\n      \"parameters\": {...}\n    },\n    {\n      \"step\": 2,\n      \"command\": \"analyze_directory_structure\",\n      \"depends_on\": [\"discover_project\"]\n    },\n    {\n      \"step\": 3,\n      \"command\": \"map_class_relationships\",\n      \"parallel\": true\n    },\n    {\n      \"step\": 4,\n      \"command\": \"assess_code_quality\",\n      \"parameters\": {...}\n    },\n    {\n      \"step\": 5,\n      \"command\": \"generate_refactoring_plan\",\n      \"depends_on\": [\"analyze_directory_structure\", \"map_class_relationships\"]\n    }\n  ]\n}\n```\n\nThis structured approach would allow for:\n1. Complete project discovery\n2. Systematic analysis of all components\n3. Data-driven refactoring recommendations\n4. Tracked implementation of changes\n5. Automated documentation generation\n\nWould you like me to elaborate on any specific part of this automation framework?",
                  "fromDraftModel": false,
                  "tokensCount": 1450,
                  "isStructural": false
                }
              ],
              "defaultShouldIncludeInContext": true,
              "shouldIncludeInContext": true,
              "genInfo": {
                "indexedModelIdentifier": "mistralai/devstral-small-2-2512",
                "identifier": "mistralai/devstral-small-2-2512",
                "loadModelConfig": {
                  "fields": [
                    {
                      "key": "llm.load.llama.cpuThreadPoolSize",
                      "value": 9
                    },
                    {
                      "key": "llm.load.contextLength",
                      "value": 4096
                    },
                    {
                      "key": "llm.load.llama.acceleration.offloadRatio",
                      "value": 0.9
                    }
                  ]
                },
                "predictionConfig": {
                  "fields": [
                    {
                      "key": "llm.prediction.temperature",
                      "value": 0.15
                    },
                    {
                      "key": "llm.prediction.promptTemplate",
                      "value": {
                        "type": "jinja",
                        "jinjaPromptTemplate": {
                          "template": "{#- Default system message if no system prompt is passed. #}\n{%- set default_system_message = '' %}\n\n{#- Begin of sequence token. #}\n{{- bos_token }}\n\n{#- Handle system prompt if it exists. #}\n{#- System prompt supports text content or text chunks. #}\n{%- if messages[0]['role'] == 'system' %}\n    {{- '[SYSTEM_PROMPT]' -}}\n    {%- if messages[0]['content'] is string %}\n        {{- messages[0]['content'] -}}\n    {%- else %}        \n        {%- for block in messages[0]['content'] %}\n            {%- if block['type'] == 'text' %}\n                {{- block['text'] }}\n            {%- else %}\n                {{- raise_exception('Only text chunks are supported in system message contents.') }}\n            {%- endif %}\n        {%- endfor %}\n    {%- endif %}\n    {{- '[/SYSTEM_PROMPT]' -}}\n    {%- set loop_messages = messages[1:] %}\n{%- else %}\n    {%- set loop_messages = messages %}\n    {%- if default_system_message != '' %}\n        {{- '[SYSTEM_PROMPT]' + default_system_message + '[/SYSTEM_PROMPT]' }}\n    {%- endif %}\n{%- endif %}\n\n\n{#- Tools definition #}\n{%- set tools_definition = '' %}\n{%- set has_tools = false %}\n{%- if tools is defined and tools is not none and tools|length > 0 %}\n    {%- set has_tools = true %}\n    {%- set tools_definition = '[AVAILABLE_TOOLS]' + (tools| tojson) + '[/AVAILABLE_TOOLS]' %}\n    {{- tools_definition }}\n{%- endif %}\n\n{#- Checks for alternating user/assistant messages. #}\n{%- set ns = namespace(index=0) %}\n{%- for message in loop_messages %}\n    {%- if message.role == 'user' or (message.role == 'assistant' and (message.tool_calls is not defined or message.tool_calls is none or message.tool_calls | length == 0)) %}\n        {%- if (message['role'] == 'user') != (ns.index % 2 == 0) %}\n            {{- raise_exception('After the optional system message, conversation roles must alternate user and assistant roles except for tool calls and results.') }}\n        {%- endif %}\n        {%- set ns.index = ns.index + 1 %}\n    {%- endif %}\n{%- endfor %}\n\n{#- Handle conversation messages. #}\n{%- for message in loop_messages %}\n\n    {#- User messages supports text content or text and image chunks. #}\n    {%- if message['role'] == 'user' %}\n        {%- if message['content'] is string %}\n            {{- '[INST]' + message['content'] + '[/INST]' }}\n        {%- elif message['content'] | length > 0 %}\n            {{- '[INST]' }}\n            {%- if message['content'] | length == 2 %}\n                {%- if message['content'][0]['type'] == 'text' and message['content'][1]['type'] in ['image', 'image_url'] %}\n                    {%- set blocks = [message['content'][1], message['content'][0]] %}\n                {%- else %}\n                    {%- set blocks = message['content'] %}\n                {%- endif %}\n            {%- else %}\n                {%- set blocks = message['content'] %}\n            {%- endif %}\n            {%- for block in blocks %}\n                {%- if block['type'] == 'text' %}\n                    {{- block['text'] }}\n                {%- elif block['type'] in ['image', 'image_url'] %}\n                    {{- '[IMG]' }}\n                {%- else %}\n                    {{- raise_exception('Only text, image and image_url chunks are supported in user message content.') }}\n                {%- endif %}\n            {%- endfor %}\n            {{- '[/INST]' }}\n        {%- else %}\n            {{- raise_exception('User message must have a string or a list of chunks in content') }}\n        {%- endif %}\n\n    {#- Assistant messages supports text content or text and image chunks. #}\n    {%- elif message['role'] == 'assistant' %}\n        {%- if (message['content'] is none or message['content'] == '' or message['content']|length == 0) and (message['tool_calls'] is not defined or message['tool_calls'] is none or message['tool_calls']|length == 0) %}\n            {{- raise_exception('Assistant message must have a string or a list of chunks in content or a list of tool calls.') }}\n        {%- endif %}\n\n        {%- if message['content'] is string %}\n            {{- message['content'] }}\n        {%- elif message['content'] | length > 0 %}\n            {%- for block in message['content'] %}\n                {%- if block['type'] == 'text' %}\n                    {{- block['text'] }}\n                {%- else %}\n                    {{- raise_exception('Only text chunks are supported in assistant message contents.') }}\n                {%- endif %}\n            {%- endfor %}\n        {%- endif %}\n        \n        {%- if message['tool_calls'] is defined and message['tool_calls'] is not none and message['tool_calls']|length > 0 %}\n            {%- for tool in message['tool_calls'] %}\n                {%- set arguments = tool['function']['arguments'] %}\n                {%- if arguments is not string %}\n                    {%- set arguments = arguments|tojson %}\n                {%- elif arguments == '' %}\n                    {%- set arguments = '{}' %}\n                {%- endif %}\n                {{- '[TOOL_CALLS]' + tool['function']['name'] + '[ARGS]' + arguments }}\n            {%- endfor %}\n        {%- endif %}\n\n        {#- End of sequence token for each assistant messages. #}\n        {{- eos_token }}\n\n    {#- Tool messages only supports text content. #}\n    {%- elif message['role'] == 'tool' %}\n        {{- '[TOOL_RESULTS]' + message['content']|string + '[/TOOL_RESULTS]' }}\n\n    {#- Raise exception for unsupported roles. #}\n    {%- else %}\n        {{- raise_exception('Only user, assistant and tool roles are supported, got ' + message['role'] + '.') }}\n    {%- endif %}\n{%- endfor %}"
                        },
                        "stopStrings": []
                      }
                    },
                    {
                      "key": "llm.prediction.llama.cpuThreads",
                      "value": 9
                    },
                    {
                      "key": "llm.prediction.vision.userMaxImageDimensionPixels",
                      "value": {
                        "checked": true,
                        "value": 2048
                      }
                    },
                    {
                      "key": "llm.prediction.vision.ignoreModelPreferredMaxImageDimension",
                      "value": false
                    },
                    {
                      "key": "llm.prediction.contextPrefill",
                      "value": []
                    },
                    {
                      "key": "llm.prediction.systemPrompt",
                      "value": "You are Devstral-Small-2-24B-Instruct-2512, a Large Language Model (LLM) created by Mistral AI, a French startup headquartered in Paris.\nYour knowledge base was last updated on 2023-10-01.\n\nWhen you're not sure about some information or when the user's request requires up-to-date or specific data, you must use the available tools to fetch the information. Do not hesitate to use tools whenever they can provide a more accurate or complete response. If no relevant tools are available, then clearly state that you don't have the information and avoid making up anything.\nIf the user's question is not clear, ambiguous, or does not provide enough context for you to accurately answer the question, you do not try to answer it right away and you rather ask the user to clarify their request (e.g. \"What are some good restaurants around me?\" => \"Where are you?\" or \"When is the next flight to Tokyo\" => \"Where do you travel from?\").\nYou are always very attentive to dates, in particular you try to resolve dates and when asked about information at specific dates, you discard information that is at another date.\nYou follow these instructions in all languages, and always respond to the user in the language they use or request.\nNext sections describe the capabilities that you have.\n\n# WEB BROWSING INSTRUCTIONS\n\nYou cannot perform any web search or access internet to open URLs, links etc. If it seems like the user is expecting you to do so, you clarify the situation and ask the user to copy paste the text directly in the chat.\n\n# MULTI-MODAL INSTRUCTIONS\n\nYou have the ability to read images, but you cannot generate images. You also cannot transcribe audio files or videos.\nYou cannot read nor transcribe audio files or videos.\n\n# TOOL CALLING INSTRUCTIONS\n\nYou may have access to tools that you can use to fetch information or perform actions. You must use these tools in the following situations:\n\n1. When the request requires up-to-date information.\n2. When the request requires specific data that you do not have in your knowledge base.\n3. When the request involves actions that you cannot perform without tools.\n\nAlways prioritize using tools to provide the most accurate and helpful response. If tools are not available, inform the user that you cannot perform the requested action at the moment."
                    },
                    {
                      "key": "llm.prediction.tools",
                      "value": {
                        "type": "none"
                      }
                    }
                  ]
                },
                "stats": {
                  "stopReason": "eosFound",
                  "tokensPerSecond": 8.3219998420598,
                  "numGpuLayers": -1,
                  "timeToFirstTokenSec": 0.445,
                  "totalTimeSec": 174.357,
                  "promptTokensCount": 1296,
                  "predictedTokensCount": 1451,
                  "totalTokensCount": 2747
                }
              }
            },
            {
              "type": "debugInfoBlock",
              "stepIdentifier": "1766040828259-0.4984283052597889",
              "debugInfo": "Conversation naming technique: 'prompt'"
            }
          ],
          "senderInfo": {
            "senderName": "mistralai/devstral-small-2-2512"
          }
        }
      ],
      "currentlySelected": 0
    }
  ],
  "usePerChatPredictionConfig": true,
  "perChatPredictionConfig": {
    "fields": []
  },
  "clientInput": "",
  "clientInputFiles": [],
  "userFilesSizeBytes": 0,
  "lastUsedModel": {
    "identifier": "mistralai/devstral-small-2-2512",
    "indexedModelIdentifier": "mistralai/devstral-small-2-2512",
    "instanceLoadTimeConfig": {
      "fields": []
    },
    "instanceOperationTimeConfig": {
      "fields": []
    }
  },
  "notes": [],
  "plugins": [],
  "pluginConfigs": {},
  "disabledPluginTools": [],
  "looseFiles": []
}